---
layout: post
title: 详谈JS中实现种子随机数及作用（转）
date: 2018-02-26 15:27:31
---

>这篇文章详细介绍了种子随机数在JS中如何实现以及有什么作用，希望能帮助有需要的人。下面一起来看看。

**前言**
在前端开发中，尤其是游戏开发，经常会用到随机数，那么我们会第一时间想到：Math.random，大家略微的看看如下代码：

    for (var i= 0; i<10; i++) { document.writeln(Math.random() +"<br />"); }

运行如上代码，也确实生成了10个不同的数字，当然你可以生成更多，看起来挺不错的，如果仅仅如此，那么本文就没必要写了。
示例
试着想一下，如果在某一个场景，我们做一个游戏，用户玩到一半的时候退出了，这样用户下次进来可以选择继续上一次的进度继续玩，那么现在问题来了：用户玩的进度以及用户的积分等简单的描述数据，我们都可以记录下来，但是游戏里绘制的障碍物、飞行物以及很多装饰类的小玩意儿，他们甚至是每次用户点开始随机输出的，要把画布上所有的东西以及它们的大小，位置等都记录下来，实在是没必要。
于是种子随机数就闪亮登场了，我们如果在画布上元素随机绘制的时候，有一个种子值，页面上所有元素的位置、大小等都是根据这个种子来算的，那么等到第二次绘制的时候只需要传入这个种子，就可以重现之前未完成的画布元素。
那么这个时候，你会发现JS里面自带的Math.random就不好使了，无法满足需求，我们继续看这段代码：

    Math.seed = 5; Math.seededRandom = function(max, min) { max = max || 1; min = min || 0; Math.seed = (Math.seed * 9301 + 49297) % 233280; var rnd = Math.seed / 233280.0; return min + rnd * (max - min); }; for (var i= 0; i<10; i++) { document.writeln(Math.seededRandom() +"<br />"); }

运行如上代码你会发现如果种子Math.seed不变，那么生成的随机数是不会变化的，哦了，如果引入这个函数，那么重现游戏场景可以实现了，虽然还需要做更多的细节处理，但机制上是能保证的，本文的重点不是实现一个这样的游戏。
本文的重点是：(Math.seed * 9301 + 49297) % 233280，为什么会是这三个值，而不是其它的到底这三个数字有什么神秘的来历呢？
像Math.seededRandom这种伪随机数生成器叫做线性同余生成器（LCG, Linear Congruential Generator)，几乎所有的运行库提供的rand都是采用的LCG，形如：

    I n+1=aI n+c(mod m)
    
生成的伪随机数序列最大周期m，范围在0到m-1之间。要达到这个最大周期，必须满足：
1.c与m互质
2.a - 1可以被m的所有质因数整除
3.如果m是4的倍数，a - 1也必须是4的倍数
以上三条被称为Hull-Dobell定理。作为一个伪随机数生成器，周期不够大是不好意思混的，所以这是要求之一。因此才有了：a=9301, c = 49297, m = 233280这组参数，以上三条全部满足。
**总结**
以上就是关于种子随机数在JS中如何实现和作用介绍的内容，希望给JavaScript学习者有所帮助

[原文地址](http://www.jb51.net/article/88848.htm)